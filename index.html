<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>倒数日</title>
    <!-- Framework7 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7@8/css/framework7.bundle.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <!-- Lunar Calendar Library -->
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/dist/lunar.min.js"></script>
    <style>
        :root {
            --f7-theme-color: #FFD700;
            --f7-theme-color-rgb: 255, 215, 0;
        }
        .page {
            background-color: #FFD700;
        }
        .navbar {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .calendar-day {
            width: 40px;
            height: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.2s;
            position: relative;
            text-align: center;
            padding: 8px 4px;
            background-color: rgba(255, 255, 255, 0.3);
            margin: 2px;
        }
        
        .calendar-day:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .calendar-day.selected {
            background-color: #ff6b35;
            color: white;
        }
        
        .solar-date {
            font-size: 14px;
            font-weight: bold;
        }
        
        .lunar-date {
            font-size: 10px;
            opacity: 0.8;
            margin-top: 2px;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            margin: 10px 0;
        }
        .calendar-header {
            text-align: center;
            padding: 8px;
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            margin: 2px;
        }
        .image-swiper {
            height: 200px;
            margin: 20px 0;
        }
        .image-slide {
            text-align: center;
            padding: 10px;
        }
        .image-slide img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 5px;
        }
        .input-container {
            margin: 20px 0;
        }
        .date-display {
            font-size: 18px;
            margin: 10px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="page">
            <!-- Navbar -->
            <div class="navbar">
                <div class="navbar-bg"></div>
                <div class="navbar-inner">
                    <div class="left">
                        <a href="#" class="link" onclick="cancel()">取消</a>
                    </div>
                    <div class="right">
                        <a href="#" class="link" onclick="add()">添加</a>
                    </div>
                </div>
            </div>
            
            <!-- Page content -->
            <div class="page-content">
                <div class="block">
                    <div class="block-title">倒数到：</div>
                    
                    <!-- 输入框 -->
                    <div class="input-container">
                        <div class="list simple-list">
                            <ul>
                                <li>
                                    <div class="item-content item-input">
                                        <div class="item-inner">
                                            <div class="item-input-wrap">
                                                <input type="text" id="countdownTitle" placeholder="请输入倒数内容（如：生日、纪念日）" value="你好">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- 选定日期显示 -->
                    <div class="date-display" id="selectedDate">27 5月 2025</div>
                    
                    <!-- 功能按钮 -->
                    <div class="segmented segmented-raised">
                        <a href="#" class="button button-active" id="lunarBtn" onclick="toggleLunar()">农历</a>
                        <a href="#" class="button" onclick="toggleRepeat()">重复</a>
                        <a href="#" class="button" onclick="toggleRemind()">提醒</a>
                    </div>
                    
                    <!-- 年份选择 -->
                    <div class="block-title">年份</div>
                    <div class="segmented segmented-raised">
                        <a href="#" class="button" onclick="prevYear()">←</a>
                        <a href="#" class="button button-active" id="yearDisplay">2025</a>
                        <a href="#" class="button" onclick="nextYear()">→</a>
                    </div>
                    
                    <!-- 月份选择 -->
                    <div class="block-title">月份</div>
                    <div class="segmented segmented-raised" id="monthSelector"></div>
                    
                    <!-- 日历 -->
                    <div class="block-title">日期</div>
                    <div class="calendar-grid" id="calendar"></div>
                    
                    <!-- 分类选择 -->
                    <div class="block-title">分类</div>
                    <div class="segmented segmented-raised">
                        <a href="#" class="button button-active">全部</a>
                        <a href="#" class="button">工作</a>
                        <a href="#" class="button">玩乐</a>
                        <a href="#" class="button">爱情</a>
                    </div>
                    
                    <!-- 图片选择器 -->
                    <div class="block-title">选择主题</div>
                    <div class="swiper image-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%234CAF50'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E甜蜜约会%3C/text%3E%3C/svg%3E" alt="甜蜜约会">
                                <div>甜蜜约会</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F44336'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E咕咕咕%3C/text%3E%3C/svg%3E" alt="咕咕咕">
                                <div>咕咕咕</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%239C27B0'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E新生儿派对%3C/text%3E%3C/svg%3E" alt="新生儿派对">
                                <div>新生儿派对</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FF9800'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E生日快乐%3C/text%3E%3C/svg%3E" alt="生日快乐">
                                <div>生日快乐</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%232196F3'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E工作计划%3C/text%3E%3C/svg%3E" alt="工作计划">
                                <div>工作计划</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E91E63'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E浪漫时光%3C/text%3E%3C/svg%3E" alt="浪漫时光">
                                <div>浪漫时光</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23795548'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E旅行计划%3C/text%3E%3C/svg%3E" alt="旅行计划">
                                <div>旅行计划</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23607D8B'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E学习目标%3C/text%3E%3C/svg%3E" alt="学习目标">
                                <div>学习目标</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23009688'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E健身计划%3C/text%3E%3C/svg%3E" alt="健身计划">
                                <div>健身计划</div>
                            </div>
                            <div class="swiper-slide image-slide">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23CDDC39'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='12' fill='white' text-anchor='middle' dominant-baseline='middle'%3E特殊日子%3C/text%3E%3C/svg%3E" alt="特殊日子">
                                <div>特殊日子</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Framework7 JS -->
    <script src="https://cdn.jsdelivr.net/npm/framework7@8/js/framework7.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.min.js"></script>
    <script>
        // Framework7 App
        const app = new Framework7({
            el: '#app',
            theme: 'auto'
        });
        
        let currentDate = new Date();
        let showLunar = true;
        let selectedDay = 27;
        let swiper;
        
        // 初始化Swiper
        function initSwiper() {
            swiper = new Swiper('.image-swiper', {
                slidesPerView: 3,
                spaceBetween: 10,
                centeredSlides: true,
                loop: true
            });
        }
        
        function toggleLunar() {
            showLunar = !showLunar;
            const btn = document.getElementById('lunarBtn');
            btn.classList.toggle('button-active', showLunar);
            updateCalendar();
        }
        
        function toggleRepeat() {
            // 重复功能实现
            console.log('切换重复功能');
        }
        
        function toggleRemind() {
            // 提醒功能实现
            console.log('切换提醒功能');
        }
        
        function updateMonthSelector() {
            const monthSelector = document.getElementById('monthSelector');
            monthSelector.innerHTML = '';
            const months = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];
            
            months.forEach((monthName, i) => {
                const btn = document.createElement('a');
                btn.href = '#';
                btn.className = 'button';
                btn.textContent = monthName;
                btn.onclick = (e) => {
                    e.preventDefault();
                    selectMonth(i);
                };
                if (i === currentDate.getMonth()) {
                    btn.classList.add('button-active');
                }
                monthSelector.appendChild(btn);
            });
        }
        
        function updateCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            
            // Add weekday headers
            const weekdays = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];
            weekdays.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-header';
                dayHeader.textContent = day;
                calendar.appendChild(dayHeader);
            });
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            
            // Add empty cells for days before first day of month
            for (let i = 0; i < firstDay.getDay(); i++) {
                calendar.appendChild(document.createElement('div'));
            }
            
            // Add days of month
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                // 公历日期
                const solarDiv = document.createElement('div');
                solarDiv.className = 'solar-date';
                solarDiv.textContent = day;
                dayElement.appendChild(solarDiv);
                
                // 农历日期（如果开启显示）
                if (showLunar) {
                    try {
                        const lunar = Lunar.fromDate(new Date(year, month, day));
                        const lunarDiv = document.createElement('div');
                        lunarDiv.className = 'lunar-date';
                        lunarDiv.textContent = lunar.getDayInChinese();
                        dayElement.appendChild(lunarDiv);
                    } catch (e) {
                        console.log('农历转换失败:', e);
                    }
                }
                
                if (day === selectedDay) {
                    dayElement.classList.add('selected');
                }
                
                dayElement.onclick = () => selectDay(day);
                calendar.appendChild(dayElement);
            }
        }
        
        function selectMonth(month) {
            currentDate.setMonth(month);
            updateMonthSelector();
            updateCalendar();
        }
        
        function prevYear() {
            currentDate.setFullYear(currentDate.getFullYear() - 1);
            document.getElementById('yearDisplay').textContent = currentDate.getFullYear();
            updateCalendar();
        }
        
        function nextYear() {
            currentDate.setFullYear(currentDate.getFullYear() + 1);
            document.getElementById('yearDisplay').textContent = currentDate.getFullYear();
            updateCalendar();
        }
        
        function selectDay(day) {
            selectedDay = day;
            const selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            
            // 更新显示的日期
            const dateStr = `${selectedDate.getDate()} ${selectedDate.getMonth() + 1}月 ${selectedDate.getFullYear()}`;
            document.getElementById('selectedDate').textContent = dateStr;
            
            // 重新渲染日历以更新选中状态
            updateCalendar();
        }
        
        function cancel() {
            console.log('取消操作');
        }
        
        function add() {
            const title = document.getElementById('countdownTitle').value;
            const date = document.getElementById('selectedDate').textContent;
            console.log('添加倒数日:', title, date);
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateMonthSelector();
            updateCalendar();
            
            // 延迟初始化Swiper，确保DOM已渲染
            setTimeout(() => {
                initSwiper();
            }, 100);
        });
    </script>
</body>
</html>